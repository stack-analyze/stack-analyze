<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: functions/scraping.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: functions/scraping.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { default as axios } from "axios";
import { load } from "cheerio";
import colors from "colors";
import { printTable } from "console-table-printer";

/**
 * @typedef {"title"|"images"|"metadata"|"headings"|"table_heading"|"table_data"|"links"|"cites"} Options
 * 
 * It takes a URL and an option as arguments, and then it scrapes the page at the URL for the option
 * @param {string} url 
 * @param {Options} options
 * @returns {Promise&lt;void>}
 */
export default async function scrape(url, options) {
  try {
    const { data } = await axios.get(url);
    const $ = load(data);

    const scraping = {
      title: () => console.info($("title").text()),
      images() {
        const imageList = $("img").map((i, el) => ({
          imagePath: $(el).attr("src"),
          imageTitle: $(el).attr("alt")
        })).toArray();

        imageList.length === 0
          ? console.info("no found images")
          : printTable(imageList);
      },
      metadata() {
        const metadataList = $("meta").map((i, el) => ({
          metaInfo: $(el).attr("name"),
          metaContent: $(el).attr("content")
        })).toArray()
          .filter((data) => data?.metaInfo);

        printTable(metadataList);
      },
      headings() {
        const headingList = $("h1, h2, h3, h4, h5, h6").map((i, el) => ({
          headingTag: $(el).prop("tagName"),
          headingText: $(el).text()
        })).toArray();

        printTable(headingList);
      },
      tableHead() {
        const tableHeadList = $("th").map((i, el) => ({
          headingRow: i,
          text: $(el).text()
        })).toArray();

        tableHeadList.length === 0
          ? console.info("no found th tags")
          : printTable(tableHeadList);
      },
      tableData() {
        const tableColumnList = $("td").map((i, el) => ({
          tableRow: i + 1,
          tableData: $(el).text(),
        })).toArray();

        tableColumnList.length === 0
          ? console.info("no found td tags")
          : console.table(tableColumnList.slice(0, 10), ["tableData"]);
      },
      links() {
        const linkList = $("a").map((i, el) => ({
          url: $(el).attr("href"),
          text: $(el).text()
        })).toArray()
          .filter(({ url }) => url.indexOf("#") !== 0);

        printTable(linkList);
      },
      cites() {
        const citeList = $("q, blockquote").map((i, el) => ({
          citeTag: $(el).prop("tagName"),
          citeLink: $(el).attr("cite"),
          citeText: $(el).text()
        })).toArray();

        citeList.length === 0
          ? console.info("no found q and/or blockquote tags")
          : printTable(citeList);
      }
    };

    scraping[options]();
  } catch (err) {
    console.error(colors.red(err.message));
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#aboutOpts">aboutOpts</a></li><li><a href="global.html#barColor">barColor</a></li><li><a href="global.html#exitCli">exitCli</a></li><li><a href="global.html#gigabyteConvert">gigabyteConvert</a></li><li><a href="global.html#hardwareOpts">hardwareOpts</a></li><li><a href="global.html#infoOpts">infoOpts</a></li><li><a href="global.html#mainMenu">mainMenu</a></li><li><a href="global.html#returnMain">returnMain</a></li><li><a href="global.html#webOpts">webOpts</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Nov 02 2022 11:54:02 GMT-0500 (hora est√°ndar de Colombia)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
